#!/bin/bash
################################################################################
# disk2iso v1.2.0 - Configuration
# Filepath: conf/disk2iso.conf
#
# Beschreibung:
#   Zentrale user-editierbare Konfiguration für disk2iso.
#   Wird von disk2iso.sh beim Start geladen.
#
#   WICHTIG: Globale Laufzeit-Variablen (OUTPUT_DIR, disc_label, etc.)
#            befinden sich in lib/lib-config.sh und sollten NICHT hier
#            geändert werden!
#
# Version: 1.2.0
# Datum: 14.01.2026
################################################################################

# ============================================================================
# SPRACH-KONFIGURATION
# ============================================================================

# Sprache für Meldungen (de, en, ...)
# Jedes Modul lädt automatisch lang/lib-[modul].[LANGUAGE]
readonly LANGUAGE="de"

# ============================================================================
# KONFIGURATION
# ============================================================================

# Standard-Ausgabeverzeichnis (wird bei Installation konfiguriert)
# Wird vom Service ausschließlich aus dieser Datei gelesen
DEFAULT_OUTPUT_DIR="/media/iso"

# ============================================================================
# MQTT KONFIGURATION (Home Assistant Integration)
# ============================================================================

# MQTT aktivieren/deaktivieren
MQTT_ENABLED=false

# MQTT Broker-Einstellungen
MQTT_BROKER="192.168.1.100"
MQTT_PORT=1883              # Standard MQTT Port
MQTT_USER=""                # Optional: MQTT Username
MQTT_PASSWORD=""            # Optional: MQTT Password

# MQTT Topic-Konfiguration
MQTT_TOPIC_PREFIX="homeassistant/sensor/disk2iso"
MQTT_CLIENT_ID="disk2iso-${HOSTNAME}"

# MQTT Publish-Einstellungen
MQTT_QOS=0                  # Quality of Service (0, 1, 2)
MQTT_RETAIN=true            # Retain-Flag (true/false)

# ============================================================================
# TMDB API KONFIGURATION (DVD/Blu-ray Metadaten)
# ============================================================================

# TMDB API-Key von themoviedb.org
# Wird für automatische Film-Metadaten und Cover-Download benötigt
# Siehe doc/TMDB-API-Key.md für Anleitung zur API-Key Registrierung
TMDB_API_KEY=""

# ============================================================================
# AUDIO-CD ENCODING EINSTELLUNGEN
# ============================================================================

# MP3 Qualität (lame -V Parameter)
# 0 = beste Qualität (~245 kbps), 2 = hohe Qualität (~190 kbps), 4 = mittlere Qualität (~165 kbps)
MP3_QUALITY=2

# ============================================================================
# METADATEN-MODUL KONFIGURATION
# ============================================================================

# Metadata-Modul aktivieren/deaktivieren
# Wenn true: MusicBrainz (Audio-CD) und TMDB (DVD/Blu-ray) verfügbar
# Wenn false: Kein Metadata-Support, generische Dateinamen werden verwendet
METADATA_ENABLED=true

# Provider-Konfiguration (komma-separiert, Fallback-Ketten möglich)
# Audio-CD Provider: musicbrainz, discogs (zukünftig)
# Video Provider: tmdb, imdb (zukünftig)
METADATA_AUDIO_PROVIDER="musicbrainz"
METADATA_VIDEO_PROVIDER="tmdb"

# Wartezeit für Metadaten-Auswahl (Sekunden)
# Gibt dem User Zeit für:
# - CD-Hülle rausholen und Publisher/Jahr prüfen (oft Schriftgröße 5-6)
# - Mehrere Releases durchscrollen und vergleichen
# - Gründliche Entscheidung bei unklaren Fällen
#
# Werte:
#   0     = Kein Timeout, immer auf User warten (für Perfektionisten)
#   5-10  = Schnell (Automatisierung, User kennt seine CDs)
#   60    = Standard (entspannte Auswahl, empfohlen)
#   90-120 = Gründlich (Zeit für detaillierte CD-Hüllen-Prüfung)
#   300   = Maximum (5 Minuten, für sehr unentschlossene User)
METADATA_SELECTION_TIMEOUT=60

# ============================================================================
# KOPIER-PARAMETER
# ============================================================================

# ddrescue Einstellungen (für beschädigte Discs)
DDRESCUE_RETRIES=1          # Wiederholungen bei Lesefehlern (-r Parameter)

# Hinweis: Blockgröße wird dynamisch ermittelt (Standard: 2048 für optische Medien)
# Hinweis: dd conv=noerror,sync bleibt hardcoded (wichtig für Datenintegrität)

# ============================================================================
# HARDWARE-ERKENNUNG
# ============================================================================

# USB-Laufwerk Erkennung
USB_DRIVE_DETECTION_ATTEMPTS=5  # Anzahl Versuche
USB_DRIVE_DETECTION_DELAY=10    # Sekunden zwischen Versuchen
